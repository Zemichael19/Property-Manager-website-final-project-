<!DOCTYPE html>
<html>
  <%- include('../head'); -%>
  <body>
    <%- include('../navbar'); -%>
    <div class="container-fluid">
      <!-- Default form contact -->
      <form class="text-center border border-light p-5" id="addapp">
        <!-- Subject -->

        <p class="h4 mb-4">Add an apartment</p>
        <select class="browser-default custom-select mb-4">
          <option value="" disabled>Choose Property</option>
          <%_ for (const prop of properties) { -%>
          <option value="<%=prop._id-%>"><%= prop.name-%></option>
          <%_ } -%>
        </select>
        <!--<input type="text" name="property" class="form-control mb-4" value="<propid>" >-->
        <!-- Number of rooms -->

        <input type="text" name="n_rooms" class="form-control mb-4" placeholder="Number of Rooms">
        <!-- Number of bathrooms -->
        <input type="text" name="n_bathrooms" class="form-control mb-4" placeholder="Number of bathrooms">
        <!-- Listed -->
        Listed
        <input type="checkbox" name="listed" class="form-control mb-4" placeholder="Listed">
        Furnished
        <!-- furnished -->
        <input type="checkbox" name="furnished" class="form-control mb-4" placeholder="Furnished">
        <!-- Floor num -->
        <input type="text" name="floor" class="form-control mb-4" placeholder="Floor number">
        <!-- Square footage -->
        <input type="text" name="sqFoot" class="form-control mb-4" placeholder="Square Footage">
        <!-- Pets allowed -->
        Pets allowed
        <input type="checkbox" name="pets" class="form-control mb-4" placeholder="Pets">
        <!-- Laundry avalible -->
        Laundry avalible
        <input type="checkbox" name="laundry" class="form-control mb-4" placeholder="Laundry">
        <!-- parking avalible -->
        Parking avalible
        <input type="checkbox" name="parking" class="form-control mb-4" placeholder="Parking">
        <!-- start date -->
        <input type="text" name="s_date" class="form-control mb-4" placeholder="Start date">
        <!-- end date -->
        <input type="text" name="e_date" class="form-control mb-4" placeholder="End date">
        <!-- ac available -->
        AC available
        <input type="checkbox" name="ac" class="form-control mb-4" placeholder="AC">
        <!-- Unit num -->
        <input type="text" name="u_num" class="form-control mb-4" placeholder="Unit num">

        <!-- submit button -->
        <button class="btn btn-info btn-block" type="submit">Submit</button>

      </form>
<!-- Default form contact -->
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      // Create an apartment
      $('#addapp').on('submit', function(event) {
        console.log("hello3");
        const form = $(this);
        event.preventDefault();
        $.ajax({method: 'post', url: '/apartments', data: form.serialize()})
          .done(id => window.location.replace(`/properties/${id}`))
          .fail(error => alert(error.responseText));
      });
    </script>
  </body>
</html>
